<!doctype html><html lang="ko"><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>팔자손금 진단기 | Toolmoa</title>
<link rel="stylesheet" href="/assets/css/base.css"/>
  <script defer src="/assets/js/ui-kit.js"></script>
<style>
.hand-wrap{position:relative;aspect-ratio:3/4;background:var(--card);
  border:1px solid var(--line);border-radius:16px;display:flex;align-items:center;justify-content:center;}
#hand{width:64%;max-width:360px;}
.line{stroke-linecap:round;stroke-width:8;fill:none;opacity:.9}
#drawCanvas{position:absolute;inset:0;cursor:crosshair}
</style>

  
</head>
  <body>

    <script src="/assets/js/theme.js"></script>
<script src="/assets/js/auto-wire.js"></script>

<header class="container" style="display:flex;justify-content:space-between;align-items:center">
  <a href="/" class="badge">🧰 Toolmoa.kr</a>
  <button id="themeToggle" class="btn btn-ghost">다크모드</button>
</header>

<main class="container" style="display:grid;gap:18px;grid-template-columns:1.1fr 1fr">
  <!-- 기본 모드 -->
  <section class="section">
    <h1>🖐️ 팔자손금 진단기</h1>
    <div class="card toggle" style="display:grid;grid-template-columns:repeat(4,1fr);gap:8px">
      <div>
        <div class="badge">생명선</div>
        <button class="btn js-opt" data-k="life" data-v="short">짧다</button>
        <button class="btn js-opt is-active" data-k="life" data-v="normal">보통</button>
        <button class="btn js-opt" data-k="life" data-v="long">길다</button>
      </div>
      <div>
        <div class="badge">감정선</div>
        <button class="btn js-opt" data-k="heart" data-v="short">짧다</button>
        <button class="btn js-opt is-active" data-k="heart" data-v="normal">보통</button>
        <button class="btn js-opt" data-k="heart" data-v="long">길다</button>
      </div>
      <div>
        <div class="badge">두뇌선</div>
        <button class="btn js-opt" data-k="head" data-v="short">짧다</button>
        <button class="btn js-opt is-active" data-k="head" data-v="normal">보통</button>
        <button class="btn js-opt" data-k="head" data-v="long">길다</button>
      </div>
      <div>
        <div class="badge">운명선</div>
        <button class="btn js-opt is-active" data-k="fate" data-v="none">없음/약함</button>
        <button class="btn js-opt" data-k="fate" data-v="normal">보통</button>
        <button class="btn js-opt" data-k="fate" data-v="strong">뚜렷하다</button>
      </div>
    </div>

    <div class="hand-wrap" style="margin-top:12px">
      <!-- 손 SVG (손목 X, 손바닥 중심) -->
      <svg id="hand" viewBox="0 0 200 300">
        <path d="M90 290c-40-6-60-42-60-80 0-32 1-92 1-114 0-10 9-18 18-18 10 0 18 8 18 18v60
                 M116 38c10 0 18 8 18 18v66
                 M142 50c10 0 18 8 18 18v60
                 M66 46c10 0 18 8 18 18v70
                 M160 96c10 0 18 8 18 18v70
                 M90 290c40-6 80-42 80-80 0-24-2-45-10-60" 
              fill="#f7c9a6" stroke="#e0b79a" stroke-width="3"/>
        <!-- 기본 선 위치 -->
        <path id="line-heart" class="line" stroke="#3AA9FF" d="M50 140 C90 130, 120 130, 150 138"/>
        <path id="line-head"  class="line" stroke="#FFCC48" d="M46 165 C90 172, 120 172, 154 168"/>
        <path id="line-life"  class="line" stroke="#FF6F91" d="M70 190 C60 210, 70 235, 90 250"/>
        <path id="line-fate"  class="line" stroke="#4BD0B6" d="M112 172 L112 230"/>
      </svg>
      <canvas id="drawCanvas"></canvas>
    </div>

    <div class="card" id="analysis" style="margin-top:12px;color:var(--muted)">선 길이를 선택하면 간략 해석이 여기 표시됩니다.</div>
    <div style="display:flex;gap:8px;margin-top:8px">
      <button id="btnDraw" class="btn">그려서 분석</button>
      <a href="/" class="btn btn-ghost">홈으로</a>
    </div>
  </section>

  <!-- 업로드(선택) -->
  <section class="section">
    <h2 class="badge">고급 모드 (사진 업로드 · 선택)</h2>
    <div class="card" style="display:flex;gap:8px;align-items:center">
      <input id="file" type="file" accept="image/*" class="btn-ghost" style="padding:8px;border:1px solid var(--line);border-radius:10px;background:var(--card);color:var(--text)">
      <button id="analyzeUpload" class="btn btn-primary">업로드 분석</button>
    </div>
    <div class="card" id="preview" style="height:260px;margin-top:10px;display:flex;align-items:center;justify-content:center;color:var(--muted)">
      업로드 전 간단한 대비/밝기 강조로 선명도를 올려 보여줍니다.
    </div>
    <div id="ad-area"><div id="coupang-slot"></div></div>
  </section>
</main>

<script src="/assets/js/theme.js" defer></script>
<script>
// 버튼 활성 표시 & 선 길이 반응
const state = { life:'normal', heart:'normal', head:'normal', fate:'none' };
document.querySelectorAll('.js-opt').forEach(b=>{
  b.addEventListener('click',()=>{
    const k=b.dataset.k, v=b.dataset.v;
    state[k]=v;
    // active
    b.parentElement.querySelectorAll('.btn').forEach(x=>x.classList.remove('is-active'));
    b.classList.add('is-active');
    redraw();
  });
});

function redraw(){
  // 기준 좌표
  const heart = document.getElementById('line-heart');
  const head  = document.getElementById('line-head');
  const life  = document.getElementById('line-life');
  const fate  = document.getElementById('line-fate');

  // 감정선
  heart.setAttribute('d', state.heart==='short'
       ? 'M60 138 C90 130, 110 130, 135 136'
       : state.heart==='long'
       ? 'M40 140 C90 130, 125 130, 160 138'
       : 'M50 140 C90 130, 120 130, 150 138');

  // 두뇌선
  head.setAttribute('d', state.head==='short'
       ? 'M58 165 C90 172, 110 172, 138 168'
       : state.head==='long'
       ? 'M38 165 C90 172, 125 172, 166 168'
       : 'M46 165 C90 172, 120 172, 154 168');

  // 생명선
  life.setAttribute('d', state.life==='short'
       ? 'M78 190 C68 205, 76 228, 90 242'
       : state.life==='long'
       ? 'M64 190 C54 215, 66 245, 96 262'
       : 'M70 190 C60 210, 70 235, 90 250');

  // 운명선
  fate.style.display = (state.fate==='none') ? 'none' : '';
  fate.setAttribute('d', state.fate==='strong' ? 'M112 162 L112 245' : 'M112 172 L112 230');

  // 간단 해석
  const txt = [];
  if(state.life==='long') txt.push('생명선이 길어 체력과 회복력이 좋습니다.');
  if(state.life==='short') txt.push('생명선이 짧아 피로 관리에 신경 쓰면 좋아요.');
  if(state.heart==='long') txt.push('감정 표현이 풍부하고 인간관계 운이 좋습니다.');
  if(state.head==='long') txt.push('두뇌선이 길어 집중력과 분석력이 뛰어납니다.');
  if(state.fate==='strong') txt.push('운명선이 뚜렷해 커리어 운이 강합니다.');
  document.getElementById('analysis').textContent = txt.length? txt.join(' ') : '선 길이를 선택하면 간략 해석이 표시됩니다.';
}
redraw();

// 그려서 분석(간단): 사용자가 선을 그리면 길이/기울기를 읽어 대략 분류
const cvs = document.getElementById('drawCanvas');
const ctx = cvs.getContext('2d');
function fit(){ cvs.width=cvs.clientWidth; cvs.height=cvs.clientHeight; }
new ResizeObserver(fit).observe(cvs);
let drawing=false, pts=[];
document.getElementById('btnDraw').addEventListener('click',()=>{
  alert('손바닥 위에 선을 하나 그려 보세요. 길이/기울기를 간단 분석합니다.');
});
cvs.addEventListener('pointerdown',e=>{drawing=true;pts=[[e.offsetX,e.offsetY]];});
cvs.addEventListener('pointermove',e=>{
  if(!drawing) return;
  pts.push([e.offsetX,e.offsetY]);
  ctx.clearRect(0,0,cvs.width,cvs.height);
  ctx.strokeStyle='rgba(123,97,255,.9)';ctx.lineWidth=6;ctx.lineCap='round';
  ctx.beginPath(); ctx.moveTo(pts[0][0],pts[0][1]);
  for(const p of pts) ctx.lineTo(p[0],p[1]); ctx.stroke();
});
cvs.addEventListener('pointerup',()=>{
  drawing=false;
  if(pts.length<2) return;
  // 간단 길이/각도 계산
  const dx = pts[pts.length-1][0]-pts[0][0];
  const dy = pts[pts.length-1][1]-pts[0][1];
  const len = Math.hypot(dx,dy);
  const angle = Math.atan2(dy,dx)*(180/Math.PI);
  let msg = `그린 선 길이 ${Math.round(len)}px, 각도 ${Math.round(angle)}°. `;
  if(len>cvs.width*0.55) msg += '=> 긴 선(집중력/지구력↑).';
  else if(len<cvs.width*0.3) msg += '=> 짧은 선(집중력/지구력↓).';
  else msg += '=> 보통 길이.';
  document.getElementById('analysis').textContent = msg;
});
</script>
<script src="/assets/js/ads-coupang.js" defer></script>
 <script src="/assets/js/ui-kit.js"></script>   
</body></html>
